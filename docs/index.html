<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.28.0">


<link href="css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "";
</script>

  <meta id="repository-name" content="github.com/watzon/tourmaline">
  <title>README - github.com/watzon/tourmaline</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="github.com/watzon/tourmaline/toplevel" data-name="top level namespace">
      <a href="toplevel.html">Top Level Namespace</a>
      
    </li>
  
  <li class="parent " data-id="github.com/watzon/tourmaline/Tourmaline" data-name="tourmaline">
      <a href="Tourmaline.html">Tourmaline</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/watzon/tourmaline/Tourmaline/Bot" data-name="tourmaline::bot">
      <a href="Tourmaline/Bot.html">Bot</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Animation" data-name="tourmaline::bot::animation">
      <a href="Tourmaline/Bot/Animation.html">Animation</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Audio" data-name="tourmaline::bot::audio">
      <a href="Tourmaline/Bot/Audio.html">Audio</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/CallbackGame" data-name="tourmaline::bot::callbackgame">
      <a href="Tourmaline/Bot/CallbackGame.html">CallbackGame</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/CallbackQuery" data-name="tourmaline::bot::callbackquery">
      <a href="Tourmaline/Bot/CallbackQuery.html">CallbackQuery</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Chat" data-name="tourmaline::bot::chat">
      <a href="Tourmaline/Bot/Chat.html">Chat</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ChatAction" data-name="tourmaline::bot::chataction">
      <a href="Tourmaline/Bot/ChatAction.html">ChatAction</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ChatMember" data-name="tourmaline::bot::chatmember">
      <a href="Tourmaline/Bot/ChatMember.html">ChatMember</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ChatPhoto" data-name="tourmaline::bot::chatphoto">
      <a href="Tourmaline/Bot/ChatPhoto.html">ChatPhoto</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ChosenInlineResult" data-name="tourmaline::bot::choseninlineresult">
      <a href="Tourmaline/Bot/ChosenInlineResult.html">ChosenInlineResult</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Client" data-name="tourmaline::bot::client">
      <a href="Tourmaline/Bot/Client.html">Client</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/CommandHandler" data-name="tourmaline::bot::commandhandler">
      <a href="Tourmaline/Bot/CommandHandler.html">CommandHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/CommandMiddleware" data-name="tourmaline::bot::commandmiddleware">
      <a href="Tourmaline/Bot/CommandMiddleware.html">CommandMiddleware</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Contact" data-name="tourmaline::bot::contact">
      <a href="Tourmaline/Bot/Contact.html">Contact</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Document" data-name="tourmaline::bot::document">
      <a href="Tourmaline/Bot/Document.html">Document</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/EventHandler" data-name="tourmaline::bot::eventhandler">
      <a href="Tourmaline/Bot/EventHandler.html">EventHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/File" data-name="tourmaline::bot::file">
      <a href="Tourmaline/Bot/File.html">File</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ForceReply" data-name="tourmaline::bot::forcereply">
      <a href="Tourmaline/Bot/ForceReply.html">ForceReply</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Game" data-name="tourmaline::bot::game">
      <a href="Tourmaline/Bot/Game.html">Game</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/GameHighScore" data-name="tourmaline::bot::gamehighscore">
      <a href="Tourmaline/Bot/GameHighScore.html">GameHighScore</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineKeyboardButton" data-name="tourmaline::bot::inlinekeyboardbutton">
      <a href="Tourmaline/Bot/InlineKeyboardButton.html">InlineKeyboardButton</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineKeyboardMarkup" data-name="tourmaline::bot::inlinekeyboardmarkup">
      <a href="Tourmaline/Bot/InlineKeyboardMarkup.html">InlineKeyboardMarkup</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQuery" data-name="tourmaline::bot::inlinequery">
      <a href="Tourmaline/Bot/InlineQuery.html">InlineQuery</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResult" data-name="tourmaline::bot::inlinequeryresult">
      <a href="Tourmaline/Bot/InlineQueryResult.html">InlineQueryResult</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultArticle" data-name="tourmaline::bot::inlinequeryresultarticle">
      <a href="Tourmaline/Bot/InlineQueryResultArticle.html">InlineQueryResultArticle</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultAudio" data-name="tourmaline::bot::inlinequeryresultaudio">
      <a href="Tourmaline/Bot/InlineQueryResultAudio.html">InlineQueryResultAudio</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedAudio" data-name="tourmaline::bot::inlinequeryresultcachedaudio">
      <a href="Tourmaline/Bot/InlineQueryResultCachedAudio.html">InlineQueryResultCachedAudio</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedDocument" data-name="tourmaline::bot::inlinequeryresultcacheddocument">
      <a href="Tourmaline/Bot/InlineQueryResultCachedDocument.html">InlineQueryResultCachedDocument</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedGif" data-name="tourmaline::bot::inlinequeryresultcachedgif">
      <a href="Tourmaline/Bot/InlineQueryResultCachedGif.html">InlineQueryResultCachedGif</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedMpeg4Gif" data-name="tourmaline::bot::inlinequeryresultcachedmpeg4gif">
      <a href="Tourmaline/Bot/InlineQueryResultCachedMpeg4Gif.html">InlineQueryResultCachedMpeg4Gif</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedPhoto" data-name="tourmaline::bot::inlinequeryresultcachedphoto">
      <a href="Tourmaline/Bot/InlineQueryResultCachedPhoto.html">InlineQueryResultCachedPhoto</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedSticker" data-name="tourmaline::bot::inlinequeryresultcachedsticker">
      <a href="Tourmaline/Bot/InlineQueryResultCachedSticker.html">InlineQueryResultCachedSticker</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedVideo" data-name="tourmaline::bot::inlinequeryresultcachedvideo">
      <a href="Tourmaline/Bot/InlineQueryResultCachedVideo.html">InlineQueryResultCachedVideo</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultCachedVoice" data-name="tourmaline::bot::inlinequeryresultcachedvoice">
      <a href="Tourmaline/Bot/InlineQueryResultCachedVoice.html">InlineQueryResultCachedVoice</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultContact" data-name="tourmaline::bot::inlinequeryresultcontact">
      <a href="Tourmaline/Bot/InlineQueryResultContact.html">InlineQueryResultContact</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultDocument" data-name="tourmaline::bot::inlinequeryresultdocument">
      <a href="Tourmaline/Bot/InlineQueryResultDocument.html">InlineQueryResultDocument</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultGif" data-name="tourmaline::bot::inlinequeryresultgif">
      <a href="Tourmaline/Bot/InlineQueryResultGif.html">InlineQueryResultGif</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultLocation" data-name="tourmaline::bot::inlinequeryresultlocation">
      <a href="Tourmaline/Bot/InlineQueryResultLocation.html">InlineQueryResultLocation</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultMpeg4Gif" data-name="tourmaline::bot::inlinequeryresultmpeg4gif">
      <a href="Tourmaline/Bot/InlineQueryResultMpeg4Gif.html">InlineQueryResultMpeg4Gif</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultPhoto" data-name="tourmaline::bot::inlinequeryresultphoto">
      <a href="Tourmaline/Bot/InlineQueryResultPhoto.html">InlineQueryResultPhoto</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultVenue" data-name="tourmaline::bot::inlinequeryresultvenue">
      <a href="Tourmaline/Bot/InlineQueryResultVenue.html">InlineQueryResultVenue</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultVideo" data-name="tourmaline::bot::inlinequeryresultvideo">
      <a href="Tourmaline/Bot/InlineQueryResultVideo.html">InlineQueryResultVideo</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InlineQueryResultVoice" data-name="tourmaline::bot::inlinequeryresultvoice">
      <a href="Tourmaline/Bot/InlineQueryResultVoice.html">InlineQueryResultVoice</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputContactMessageContent" data-name="tourmaline::bot::inputcontactmessagecontent">
      <a href="Tourmaline/Bot/InputContactMessageContent.html">InputContactMessageContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputLocationMessageContent" data-name="tourmaline::bot::inputlocationmessagecontent">
      <a href="Tourmaline/Bot/InputLocationMessageContent.html">InputLocationMessageContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputMedia" data-name="tourmaline::bot::inputmedia">
      <a href="Tourmaline/Bot/InputMedia.html">InputMedia</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputMediaVideo" data-name="tourmaline::bot::inputmediavideo">
      <a href="Tourmaline/Bot/InputMediaVideo.html">InputMediaVideo</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputMessageContent" data-name="tourmaline::bot::inputmessagecontent">
      <a href="Tourmaline/Bot/InputMessageContent.html">InputMessageContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputTextMessageContent" data-name="tourmaline::bot::inputtextmessagecontent">
      <a href="Tourmaline/Bot/InputTextMessageContent.html">InputTextMessageContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/InputVenueMessageContent" data-name="tourmaline::bot::inputvenuemessagecontent">
      <a href="Tourmaline/Bot/InputVenueMessageContent.html">InputVenueMessageContent</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Invoice" data-name="tourmaline::bot::invoice">
      <a href="Tourmaline/Bot/Invoice.html">Invoice</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/KeyboardButton" data-name="tourmaline::bot::keyboardbutton">
      <a href="Tourmaline/Bot/KeyboardButton.html">KeyboardButton</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/LabeledPrice" data-name="tourmaline::bot::labeledprice">
      <a href="Tourmaline/Bot/LabeledPrice.html">LabeledPrice</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Location" data-name="tourmaline::bot::location">
      <a href="Tourmaline/Bot/Location.html">Location</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/MaskPosition" data-name="tourmaline::bot::maskposition">
      <a href="Tourmaline/Bot/MaskPosition.html">MaskPosition</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Message" data-name="tourmaline::bot::message">
      <a href="Tourmaline/Bot/Message.html">Message</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/MessageEntity" data-name="tourmaline::bot::messageentity">
      <a href="Tourmaline/Bot/MessageEntity.html">MessageEntity</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Middleware" data-name="tourmaline::bot::middleware">
      <a href="Tourmaline/Bot/Middleware.html">Middleware</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/MiddlewareHandler" data-name="tourmaline::bot::middlewarehandler">
      <a href="Tourmaline/Bot/MiddlewareHandler.html">MiddlewareHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/OrderInfo" data-name="tourmaline::bot::orderinfo">
      <a href="Tourmaline/Bot/OrderInfo.html">OrderInfo</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ParseMode" data-name="tourmaline::bot::parsemode">
      <a href="Tourmaline/Bot/ParseMode.html">ParseMode</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/PhotoSize" data-name="tourmaline::bot::photosize">
      <a href="Tourmaline/Bot/PhotoSize.html">PhotoSize</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/PreCheckoutQuery" data-name="tourmaline::bot::precheckoutquery">
      <a href="Tourmaline/Bot/PreCheckoutQuery.html">PreCheckoutQuery</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ReplyKeyboardMarkup" data-name="tourmaline::bot::replykeyboardmarkup">
      <a href="Tourmaline/Bot/ReplyKeyboardMarkup.html">ReplyKeyboardMarkup</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ReplyKeyboardRemove" data-name="tourmaline::bot::replykeyboardremove">
      <a href="Tourmaline/Bot/ReplyKeyboardRemove.html">ReplyKeyboardRemove</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ShippingAddress" data-name="tourmaline::bot::shippingaddress">
      <a href="Tourmaline/Bot/ShippingAddress.html">ShippingAddress</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ShippingOption" data-name="tourmaline::bot::shippingoption">
      <a href="Tourmaline/Bot/ShippingOption.html">ShippingOption</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/ShippingQuery" data-name="tourmaline::bot::shippingquery">
      <a href="Tourmaline/Bot/ShippingQuery.html">ShippingQuery</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Sticker" data-name="tourmaline::bot::sticker">
      <a href="Tourmaline/Bot/Sticker.html">Sticker</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/StickerSet" data-name="tourmaline::bot::stickerset">
      <a href="Tourmaline/Bot/StickerSet.html">StickerSet</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/SuccessfulPayment" data-name="tourmaline::bot::successfulpayment">
      <a href="Tourmaline/Bot/SuccessfulPayment.html">SuccessfulPayment</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Update" data-name="tourmaline::bot::update">
      <a href="Tourmaline/Bot/Update.html">Update</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/UpdateAction" data-name="tourmaline::bot::updateaction">
      <a href="Tourmaline/Bot/UpdateAction.html">UpdateAction</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/User" data-name="tourmaline::bot::user">
      <a href="Tourmaline/Bot/User.html">User</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/UserProfilePhotos" data-name="tourmaline::bot::userprofilephotos">
      <a href="Tourmaline/Bot/UserProfilePhotos.html">UserProfilePhotos</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Venue" data-name="tourmaline::bot::venue">
      <a href="Tourmaline/Bot/Venue.html">Venue</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Video" data-name="tourmaline::bot::video">
      <a href="Tourmaline/Bot/Video.html">Video</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/VideoNote" data-name="tourmaline::bot::videonote">
      <a href="Tourmaline/Bot/VideoNote.html">VideoNote</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/Voice" data-name="tourmaline::bot::voice">
      <a href="Tourmaline/Bot/Voice.html">Voice</a>
      
    </li>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/Bot/WebhookInfo" data-name="tourmaline::bot::webhookinfo">
      <a href="Tourmaline/Bot/WebhookInfo.html">WebhookInfo</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/watzon/tourmaline/Tourmaline/User" data-name="tourmaline::user">
      <a href="Tourmaline/User.html">User</a>
      
        <ul>
  
  <li class=" " data-id="github.com/watzon/tourmaline/Tourmaline/User/API" data-name="tourmaline::user::api">
      <a href="Tourmaline/User/API.html">API</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="img/header.png" alt="Header Image"/></p>

<p><a href="https://travis-ci.org/watzon/tourmaline" target="_blank"><img src="https://img.shields.io/travis/watzon/tourmaline.svg" alt="Travis"/></a> <img src="https://img.shields.io/github/search/watzon/tourmaline/goto.svg" alt="Github search hit counter"/> <img src="https://img.shields.io/github/license/watzon/tourmaline.svg" alt="license"/></p>

<p>Telegram Bot (and hopefully soon API) framework for Crystal. Based heavily off of <a href="http://telegraf.js.org" target="_blank">Telegraf</a> this Crystal implementation allows your Telegram bot to be written in a language that's both beautiful and fast. Benchmarks coming soon.</p>

<h2>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  tourmaline:
    github: watzon/tourmaline</code></pre>

<h2>Usage</h2>

<h3>Basic usage</h3>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;tourmaline&quot;</span>

<span class="k">alias</span> <span class="t">TGBot</span> <span class="o">=</span> <span class="t">Tourmaline</span><span class="t">::</span><span class="t">Bot</span>

bot <span class="o">=</span> <span class="t">TGBot</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>(<span class="t">ENV</span>[<span class="s">&quot;API_KEY&quot;</span>])

bot.command([<span class="s">&quot;start&quot;</span>, <span class="s">&quot;help&quot;</span>]) <span class="k">do</span> <span class="o">|</span>message<span class="o">|</span>
  text <span class="o">=</span> <span class="s">&quot;Echo bot is a sample bot created with the Tourmaline bot framework.&quot;</span>
  bot.send_message(message.chat.id, text)
<span class="k">end</span>

bot.command(<span class="s">&quot;echo&quot;</span>) <span class="k">do</span> <span class="o">|</span>message, params<span class="o">|</span>
  text <span class="o">=</span> params.join(<span class="s">&quot; &quot;</span>)
  bot.send_message(message.chat.id, text)
<span class="k">end</span>

bot.poll</code></pre>

<h3>Listening for events</h3>

<p>Tourmaline has a number of events that you can listen for (the same events as Telegraf actually). The full list of events is as follows:</p>

<p>Standard update types:</p>

<ul><li>Message</li><li>EditedMessage</li><li>CallbackQuery</li><li>InlineQuery</li><li>ShippingQuery</li><li>PreCheckoutQuery</li><li>ChosenInlineResult</li><li>ChannelPost</li><li>EditedChannelPost</li></ul>

<p>Update sub-types:</p>

<ul><li>Text</li><li>Audio</li><li>Document</li><li>Photo</li><li>Sticker</li><li>Video</li><li>Voice</li><li>Contact</li><li>Location</li><li>Venue</li><li>NewChatMembers</li><li>LeftChatMember</li><li>NewChatTitle</li><li>NewChatPhoto</li><li>DeleteChatPhoto</li><li>GroupChatCreated</li><li>MigrateToChatId</li><li>SupergroupChatCreated</li><li>ChannelChatCreated</li><li>MigrateFromChatId</li><li>PinnedMessage</li><li>Game</li><li>VideoNote</li><li>Invoice</li><li>SuccessfulPayment</li></ul>

<p>All of which are available through the enum <code><a href="Tourmaline/Bot/UpdateAction.html">Tourmaline::Bot::UpdateAction</a></code></p>

<pre><code class="language-crystal">bot.on(<span class="t">TGBot</span><span class="t">::</span><span class="t">UpdateAction</span><span class="t">::</span><span class="t">Text</span>) <span class="k">do</span> <span class="o">|</span>update<span class="o">|</span>
  text <span class="o">=</span> update.message.not_nil!.text.not_nil!
  puts <span class="s">&quot;TEXT: </span><span class="i">#{</span>text<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span></code></pre>

<h3>Adding middleware</h3>

<p>Middleware can be created by extending the <code><a href="Tourmaline/Bot/Middleware.html">Tourmaline::Bot::Middleware</a></code> class. All middleware classes need to have a <code>call(update : Update)</code> method. The middleware will be called on every update.</p>

<pre><code class="language-crystal">
<span class="k">class</span> <span class="t">MyMiddleware</span> <span class="o">&lt;</span> <span class="t">TGBot</span><span class="t">::</span><span class="t">Middleware</span>

  <span class="c"># All middlware include a reference to the parent bot.</span>
  <span class="c"># @bot : Tourmaline::Bot::Client</span>

  <span class="k">def</span> <span class="m">call</span>(update : <span class="t">Update</span>)
    <span class="k">if</span> message <span class="o">=</span> update.message
      <span class="k">if</span> user <span class="o">=</span> message.from_user
        <span class="k">if</span> text <span class="o">=</span> message.text
          puts <span class="s">&quot;</span><span class="i">#{</span>user.first_name<span class="i">}</span><span class="s">: </span><span class="i">#{</span>text<span class="i">}</span><span class="s">&quot;</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>

bot.use <span class="t">MyMiddleware</span></code></pre>

<h3>Webhooks</h3>

<p>Using webhooks is easy, even locally if you use the <a href="https://github.com/watzon/ngrok.cr" target="_blank">ngrok.cr</a> package.</p>

<pre><code class="language-crystal">
<span class="c"># bot.poll</span>

bot.set_webhook(<span class="s">&quot;https://example.com/bots/my_tg_bot&quot;</span>)
bot.serve(<span class="s">&quot;0.0.0.0&quot;</span>, <span class="n">3400</span>)

<span class="c"># or with ngrok.cr</span>

<span class="k">require</span> <span class="s">&quot;ngrok&quot;</span>

<span class="t">Ngrok</span>.start({ addr: <span class="s">&quot;127.0.0.1:3400&quot;</span> }) <span class="k">do</span> <span class="o">|</span>ngrok<span class="o">|</span>
  bot.set_webhook(ngrok.ngrok_url_https)
  bot.serve(<span class="s">&quot;127.0.0.1&quot;</span>, <span class="n">3400</span>)
<span class="k">end</span></code></pre>

<h3>Payments</h3>

<p>You can now accept payments with your Tourmaline app! First make sure you follow the setup instructions <a href="https://core.telegram.org/bots/payments" target="_blank">here</a> so that your bot is prepared to handle payments. Then just use the <code>send_invoice</code>, <code>answer_shipping_query</code>, and <code>answer_pre_checkout_query</code> methods to send invoices and accept payments.</p>

<pre><code class="language-crystal">bot.command(<span class="s">&quot;buy&quot;</span>) <span class="k">do</span> <span class="o">|</span>message, params<span class="o">|</span>
  bot.send_invoice(
    message.chat.id,
    <span class="s">&quot;Sample Invoice&quot;</span>,
    <span class="s">&quot;This is a test...&quot;</span>,
    <span class="s">&quot;123344232323&quot;</span>,
    <span class="s">&quot;YOUR_PROVIDER_TOKEN&quot;</span>,
    <span class="s">&quot;test1&quot;</span>,
    <span class="s">&quot;USD&quot;</span>,
    bot.labeled_prices([{label: <span class="s">&quot;Sample&quot;</span>, amount: <span class="n">299</span>}, {label: <span class="s">&quot;Another&quot;</span>, amount: <span class="n">369</span>}]).to_json
  )
<span class="k">end</span></code></pre>

<h2>Development</h2>

<p>This currently supports the following features</p>

<ul><li>[x] Implementation examples</li><li>[x] Easy command syntax</li><li>[x] Robust middleware system</li><li>[x] Standard API queries</li><li>[ ] Stickers</li><li>[x] Inline mode</li><li>[x] Long polling</li><li>[x] Webhooks</li><li>[x] Payments (<em>beta</em>)</li><li>[ ] Games</li></ul>

<p>If you want a new feature feel free to submit an issue or open a pull request.</p>

<h2>Contributing</h2>

<ol><li>Fork it ( https://github.com/watzon/tourmaline/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/watzon" target="_blank">watzon</a> Chris Watson - creator, maintainer</li></ul>
</div>
</body>
</html>
